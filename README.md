# ğŸ“ˆ Real-Time Stock Ticker

å³æ™‚å¤šè‚¡ç¥¨èµ°å‹¢åœ–è¡¨ Demoï¼Œæ”¯æ´é«˜é »æ¨æ’­ã€æ–·ç·šé‡é€£ã€è³‡æ–™è£œç™¼ã€æŠ€è¡“æŒ‡æ¨™è¨ˆç®—ã€K ç·šåœ–ã€å‰ç«¯æ•ˆèƒ½ç›£æ§èˆ‡å¤šå±¤æ¬¡å·¥ç¨‹å„ªåŒ–ã€‚

---

## ğŸš€ å°ˆæ¡ˆæ¦‚è¦½

æœ¬å°ˆæ¡ˆæ˜¯ä¸€å€‹å…¨ç«¯ TypeScript å¯¦ä½œçš„ã€Œå¤šè‚¡ç¥¨å³æ™‚èµ°å‹¢ã€ç³»çµ±ï¼Œæ¨¡æ“¬çœŸå¯¦è¡Œæƒ…æ¨æ’­å ´æ™¯ã€‚å‰ç«¯ä»¥ React + Vite + Tailwind æ‰“é€ ï¼Œå¾Œç«¯ä»¥ Node.js + ws WebSocket Server å¯¦ç¾ï¼Œæ”¯æ´å¤šæª”è‚¡ç¥¨é«˜é »æ¨æ’­ã€æ–·ç·šè‡ªå‹•é‡é€£ã€è³‡æ–™è£œç™¼ã€K ç·šåœ–èˆ‡æŠ€è¡“æŒ‡æ¨™ï¼ˆSMA/EMA/High-Lowï¼‰å³æ™‚è¨ˆç®—ï¼Œä¸¦å…§å»º FPS æ•ˆèƒ½ç›£æ§ã€‚

---

![](/client/src/assets/realtime-stock-ticker-react.gif)

---
## ğŸ›  æŠ€è¡“æ£§

- **å‰ç«¯**ï¼š
  - React 18 (TypeScript)
  - Vite
  - Tailwind CSS
  - Chart.js + chartjs-chart-financial
  - stats.js (FPS æ•ˆèƒ½ç›£æ§)
- **å¾Œç«¯**ï¼š
  - Node.js (TypeScript)
  - ws (WebSocket Server)

---

## âš¡ï¸ å°ˆæ¡ˆäº®é»

- **é«˜é »å¤šè‚¡ç¥¨æ¨æ’­**ï¼šæ¨¡æ“¬ 10~50 æª”è‚¡ç¥¨ï¼Œæ¯æª”æ¯ç§’å¤šç­† tickï¼ŒçœŸå¯¦é‚„åŸè¡Œæƒ…è² è¼‰ï¼Œæ”¯æ´å¤šç”¨æˆ¶åŒæ™‚é€£ç·šã€‚
- **æ–·ç·šè‡ªå‹•é‡é€£èˆ‡è£œç™¼**ï¼šå‰ç«¯è‡ªå‹•åµæ¸¬æ–·ç·šï¼Œé‡é€£æ™‚è‡ªå‹•è£œç™¼æ–·ç·šæœŸé–“æ‰€æœ‰éºæ¼ tickï¼Œåœ–è¡¨ä¸ä¸­æ–·ï¼Œè³‡æ–™å†ªç­‰æ€§è¨­è¨ˆã€‚
- **K ç·šåœ–èˆ‡æŠ€è¡“æŒ‡æ¨™**ï¼šæ¯ 5 ç­† tick èšåˆç‚ºä¸€æ ¹ K æ£’ï¼Œä¸¦å³æ™‚è¨ˆç®— SMAã€EMAã€High-Low ç­‰æŒ‡æ¨™ï¼ŒæŠ€è¡“æŒ‡æ¨™æ¨¡çµ„åŒ–ã€æ˜“æ–¼æ“´å……ã€‚
- **è³‡æ–™åŒæ­¥èˆ‡å»é‡**ï¼šè£œç™¼è³‡æ–™è‡ªå‹•åˆä½µå»é‡ï¼Œç¢ºä¿åœ–è¡¨é€£çºŒã€ç„¡é‡è¤‡ candleã€‚
- **æ•ˆèƒ½å„ªåŒ–**ï¼šæŒ‡æ¨™è¨ˆç®—æ¡ requestIdleCallback åˆ†æ‰¹æ’ç¨‹ï¼Œå‰ç«¯è³‡æ–™åƒ…ä¿ç•™ 100 ç­†ï¼Œé¿å…è¨˜æ†¶é«”çˆ†ç‚¸ã€‚
- **React é«˜æ•ˆæ¸²æŸ“**ï¼šuseMemoã€React.memoã€useCallback ç­‰é€²éšæ•ˆèƒ½å„ªåŒ–å¯¦è¸ï¼Œæ¨æ’­ä¸æœƒå°è‡´æ•´é«” re-renderã€‚
- **å³æ™‚æ•ˆèƒ½ç›£æ§**ï¼šå…§å»º stats.js FPS é¢æ¿ï¼Œæ–¹ä¾¿è§€å¯Ÿå‰ç«¯æ•ˆèƒ½ç“¶é ¸ï¼ŒDevTools å¯æ“´å……æ›´å¤šé–‹ç™¼å·¥å…·ã€‚
- **TypeScript å…¨ç«¯å‹åˆ¥å®‰å…¨**ï¼šå‰å¾Œç«¯å…±ç”¨å‹åˆ¥ï¼Œç¶­è­·æ€§é«˜ï¼Œæ˜“æ–¼ refactorã€‚
- **å·¥ç¨‹æ€ç¶­å®Œæ•´**ï¼šContextã€Hooksã€åˆ†å±¤æ¨¡çµ„ã€å–®ä¸€è·è²¬ã€æ˜“æ–¼æ¸¬è©¦èˆ‡æ“´å……ã€‚
- **å¯æ“´å……æ€§ä½³**ï¼šæŒ‡æ¨™è¨ˆç®—ã€æ¨æ’­æ¨¡çµ„çš†å¯ç¨ç«‹æ“´å……ï¼Œæ”¯æ´å¤šè‚¡ç¥¨ã€å¤šç”¨æˆ¶ã€å¤šæŒ‡æ¨™ã€‚

---

## ğŸ§‘â€ğŸ’» æŠ€è¡“ç´°ç¯€èˆ‡è³‡æ–™æµè¨­è¨ˆ

### 1. å¤šè‚¡ç¥¨é«˜é »æ¨æ’­
- å¾Œç«¯ `stockSimulator.ts` ä»¥ setInterval æ¨¡æ“¬å¤šæª”è‚¡ç¥¨éš¨æ©Ÿåƒ¹æ ¼ï¼Œæ¯ç§’æ¨æ’­å¤šç­† tickï¼Œæ”¯æ´ ticker å‹•æ…‹æ“´å……ã€‚
- æ¯ç­† tick çš†å¸¶æœ‰ symbolã€priceã€timestampï¼Œä¸¦ä»¥ WebSocket å»£æ’­çµ¦æ‰€æœ‰ clientã€‚
- `stock-manager.ts` ç®¡ç† tick æ­·å²ï¼Œæ”¯æ´è£œç™¼æŸ¥è©¢ã€‚

### 2. æ–·ç·šé‡é€£èˆ‡è£œç™¼
- å‰ç«¯ `WebSocketProvider.tsx` ç›£æ§é€£ç·šç‹€æ…‹ï¼Œæ–·ç·šè‡ªå‹•é‡é€£ï¼Œç‹€æ…‹ context å…¨åŸŸåŒæ­¥ã€‚
- é‡é€£æ™‚è‡ªå‹•å¸¶ä¸Šæœ€å¾Œä¸€ç­† timestampï¼Œserver ä¾æ­¤è£œç™¼æ‰€æœ‰éºæ¼ tickï¼Œç¢ºä¿åœ–è¡¨é€£çºŒã€‚
- å‰ç«¯åˆä½µè£œç™¼è³‡æ–™æ™‚è‡ªå‹•å»é‡ï¼Œé¿å…é‡è¤‡ candleï¼Œä¸¦æ”¯æ´å¤šè‚¡ç¥¨åŒæ™‚è£œç™¼ã€‚
- æ”¯æ´å¤šç¨®é€£ç·šç‹€æ…‹ï¼ˆconnecting/connected/reconnecting/disconnectedï¼‰ï¼ŒUI æ˜ç¢ºåæ˜ ã€‚

### 3. K ç·šåœ–èˆ‡æŠ€è¡“æŒ‡æ¨™
- `StockChart.tsx` ä»¥ chartjs-chart-financial å‘ˆç¾ K ç·šåœ–ï¼Œæ¯ 5 ç­† tick èšåˆä¸€æ ¹ K æ£’ã€‚
- `useIndicators.ts` ä»¥æ»‘å‹•è¦–çª—æ–¹å¼ï¼Œåƒ…ä¿ç•™ 100 ç­†åƒ¹æ ¼ï¼Œä¸¦å³æ™‚è¨ˆç®— SMA/EMA/High-Lowã€‚
- æŒ‡æ¨™è¨ˆç®—æ¡ requestIdleCallback æˆ– setTimeout åˆ†æ‰¹æ’ç¨‹ï¼Œä¸å¡ä¸»åŸ·è¡Œç·’ã€‚
- æŠ€è¡“æŒ‡æ¨™æ¨¡çµ„åŒ–ï¼Œæ˜“æ–¼æ“´å……èˆ‡å–®å…ƒæ¸¬è©¦ã€‚

### 4. React æ•ˆèƒ½å„ªåŒ–
- useMemo å¿«å– K ç·šè³‡æ–™èˆ‡ ChartDataï¼Œé¿å…ä¸å¿…è¦é‡ç®—ã€‚
- React.memo è¨˜æ†¶åŒ–åœ–è¡¨å…ƒä»¶ï¼Œæ¨æ’­ä¸æœƒå°è‡´æ•´é«” re-renderã€‚
- useCallback å°è£æ›´æ–°å‡½å¼ï¼Œé¿å…å‡½å¼é‡å»ºã€‚
- DevTools.tsx å¯æ“´å……æ›´å¤šé–‹ç™¼ç”¨å·¥å…·ã€‚

### 5. æ•ˆèƒ½ç›£æ§èˆ‡é–‹ç™¼é«”é©—
- `PerformanceStats.tsx` å…§å»º stats.jsï¼Œæ–¼ç•«é¢è§’è½é¡¯ç¤º FPSï¼Œæ–¹ä¾¿å³æ™‚è§€å¯Ÿæ•ˆèƒ½ã€‚
- å¯æ­é… Chrome DevTools > Performance tab é€²è¡Œæ›´ç´°ç·»åˆ†æã€‚
- DevTools å…ƒä»¶åƒ…æ–¼é–‹ç™¼æ¨¡å¼é¡¯ç¤ºï¼Œæ–¹ä¾¿é–‹ç™¼è€…èª¿è©¦ã€‚

### 6. è³‡æ–™åŒæ­¥èˆ‡å†ªç­‰æ€§
- æ‰€æœ‰ tick çš†ä»¥ timestamp ç‚ºä¸»éµï¼Œè£œç™¼èˆ‡å³æ™‚æ¨æ’­è‡ªå‹•åˆä½µå»é‡ã€‚
- æ”¯æ´å¤šç”¨æˆ¶åŒæ™‚é€£ç·šï¼Œè³‡æ–™ä¸€è‡´æ€§é«˜ã€‚

### 7. å·¥ç¨‹çµæ§‹èˆ‡å¯ç¶­è­·æ€§
- å‰å¾Œç«¯çš†ç‚º TypeScriptï¼Œå‹åˆ¥å…±ç”¨ï¼Œç¶­è­·æ€§é«˜ã€‚
- Contextã€Hooksã€åˆ†å±¤æ¨¡çµ„ã€å–®ä¸€è·è²¬ï¼Œæ˜“æ–¼æ“´å……èˆ‡æ¸¬è©¦ã€‚
- ç›®éŒ„çµæ§‹æ¸…æ™°ï¼Œä¾¿æ–¼åœ˜éšŠå”ä½œã€‚

---

## ğŸ›  å®‰è£èˆ‡å•Ÿå‹•

1. **å®‰è£ä¾è³´**
   ```bash
   # å®‰è£å‰å¾Œç«¯ä¾è³´
   cd client && yarn install
   cd ../server && yarn install
   cd ..
   ```
2. **å•Ÿå‹•å°ˆæ¡ˆ**
   ```bash
   # å»ºè­°æ–¼å°ˆæ¡ˆæ ¹ç›®éŒ„
   yarn dev
   # æˆ–åˆ†é–‹å•Ÿå‹•
   yarn --cwd server dev
   yarn --cwd client dev
   ```
3. **ç€è¦½å‰ç«¯**
   - é–‹å•Ÿ http://localhost:5173
   - é è¨­ WebSocket é€£ç·šè‡³ ws://localhost:3001

---

## ğŸ“ é€²éšç©æ³•

- **è‡ªè¨‚æ¨æ’­è‚¡ç¥¨æ•¸é‡èˆ‡é »ç‡**ï¼šå¯æ–¼ server/generator/stockSimulator.ts èª¿æ•´ symbols èˆ‡æ¨æ’­é »ç‡ã€‚
- **æ“´å……æŠ€è¡“æŒ‡æ¨™**ï¼šæ–¼ server/utils/indicators.tsã€client/utils/calculateIndicators.ts å¢åŠ æ–°æŒ‡æ¨™ã€‚
- **æ•ˆèƒ½å£“åŠ›æ¸¬è©¦**ï¼šå¯åŒæ™‚é–‹å•Ÿå¤šå€‹ç€è¦½å™¨åˆ†é è§€å¯Ÿ FPS èˆ‡è¨˜æ†¶é«”è² è¼‰ã€‚
- **æ–·ç·šæ¸¬è©¦**ï¼šæ‰‹å‹•é—œé–‰ server æˆ–æ‹”ç¶²è·¯ï¼Œè§€å¯Ÿè‡ªå‹•é‡é€£èˆ‡è³‡æ–™è£œç™¼æ•ˆæœã€‚
- **å¤šç”¨æˆ¶åŒæ­¥é©—è­‰**ï¼šå¤šç€è¦½å™¨åŒæ™‚é€£ç·šï¼Œé©—è­‰è³‡æ–™ä¸€è‡´æ€§èˆ‡æ•ˆèƒ½ã€‚
- **DevTools æ“´å……**ï¼šå¯æ–¼ DevTools.tsx åŠ å…¥æ›´å¤šé–‹ç™¼ç”¨å·¥å…·ã€‚

---

## ğŸ“¦ å°ˆæ¡ˆçµæ§‹

```plaintext
server/
  â”œâ”€â”€ package.json
  â”œâ”€â”€ tsconfig.json
  â””â”€â”€ src/
      â”œâ”€â”€ index.ts
      â”œâ”€â”€ price-generator.ts
      â”œâ”€â”€ stock-manager.ts
      â”œâ”€â”€ types.ts
      â”œâ”€â”€ generator/
      â”‚   â””â”€â”€ stockSimulator.ts
      â””â”€â”€ utils/
          â”œâ”€â”€ indicators.ts
          â””â”€â”€ priceHistory.ts
client/
  â”œâ”€â”€ package.json
  â”œâ”€â”€ tsconfig.json
  â”œâ”€â”€ vite.config.ts
  â”œâ”€â”€ tailwind.config.js
  â”œâ”€â”€ postcss.config.js
  â”œâ”€â”€ index.html
  â””â”€â”€ src/
      â”œâ”€â”€ App.tsx
      â”œâ”€â”€ main.tsx
      â”œâ”€â”€ types.ts
      â”œâ”€â”€ vite-env.d.ts
      â”œâ”€â”€ index.css
      â”œâ”€â”€ App.css
      â”œâ”€â”€ hooks/
      â”‚   â”œâ”€â”€ useIndicators.ts
      â”‚   â””â”€â”€ useStocks.ts
      â”œâ”€â”€ components/
      â”‚   â”œâ”€â”€ StockChart.tsx
      â”‚   â”œâ”€â”€ StockInfo.tsx
      â”‚   â”œâ”€â”€ WebSocketProvider.tsx
      â”‚   â”œâ”€â”€ PerformanceStats.tsx
      â”‚   â”œâ”€â”€ DevTools.tsx
      â”‚   â””â”€â”€ ...
      â”œâ”€â”€ contexts/
      â”‚   â””â”€â”€ StocksContext.ts
      â””â”€â”€ utils/
          â”œâ”€â”€ calculateIndicators.ts
          â”œâ”€â”€ candlestickTransformer.ts
          â””â”€â”€ ...
```
